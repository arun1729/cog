<html>
<head>
<style type="text/css">
  #container {
    max-width: 800px;
    height: 800px;
    margin: auto;
  }
</style>
</head>
<body>
<div id="container"></div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/sigma.js/2.0.0-alpha34/sigma.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/sigma.js/1.2.1/plugins/sigma.layout.forceAtlas2.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/sigma.js/1.2.1/plugins/sigma.plugins.animate.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/sigma.js/1.2.1/plugins/sigma.plugins.dragNodes.min.js"></script>

<script>

<!--results=[{"id": "Harry Potter and the Half-Blood Prince (Harry Potter, #6)", "source": "J.K. Rowling, Mary GrandPr\\u00e9", "target": "Harry Potter and the Half-Blood Prince (Harry Potter, #6)"}, {"id": "Harry Potter and the Deathly Hallows (Harry Potter, #7)", "source": "J.K. Rowling, Mary GrandPr\\u00e9", "target": "Harry Potter and the Deathly Hallows (Harry Potter, #7)"}, {"id": "Harry Potter and the Goblet of Fire (Harry Potter, #4)", "source": "J.K. Rowling, Mary GrandPr\\u00e9", "target": "Harry Potter and the Goblet of Fire (Harry Potter, #4)"}, {"id": "Harry Potter and the Chamber of Secrets (Harry Potter, #2)", "source": "J.K. Rowling, Mary GrandPr\\u00e9", "target": "Harry Potter and the Chamber of Secrets (Harry Potter, #2)"}, {"id": "Harry Potter and the Order of the Phoenix (Harry Potter, #5)", "source": "J.K. Rowling, Mary GrandPr\\u00e9", "target": "Harry Potter and the Order of the Phoenix (Harry Potter, #5)"}, {"id": "Harry Potter and the Sorcerer\'s Stone (Harry Potter, #1)", "source": "J.K. Rowling, Mary GrandPr\\u00e9", "target": "Harry Potter and the Sorcerer\'s Stone (Harry Potter, #1)"}]-->
results = [{"id": "Harry Potter and the Half-Blood Prince (Harry Potter, #6)", "source": "J.K. Rowling, Mary GrandPr\\u00e9", "target": "Harry Potter and the Half-Blood Prince (Harry Potter, #6)"}, {"id": "Harry Potter and the Deathly Hallows (Harry Potter, #7)", "source": "J.K. Rowling, Mary GrandPr\\u00e9", "target": "Harry Potter and the Deathly Hallows (Harry Potter, #7)"}, {"id": "Harry Potter and the Goblet of Fire (Harry Potter, #4)", "source": "J.K. Rowling, Mary GrandPr\\u00e9", "target": "Harry Potter and the Goblet of Fire (Harry Potter, #4)"}, {"id": "Harry Potter and the Chamber of Secrets (Harry Potter, #2)", "source": "J.K. Rowling, Mary GrandPr\\u00e9", "target": "Harry Potter and the Chamber of Secrets (Harry Potter, #2)"}, {"id": "Harry Potter and the Order of the Phoenix (Harry Potter, #5)", "source": "J.K. Rowling, Mary GrandPr\\u00e9", "target": "Harry Potter and the Order of the Phoenix (Harry Potter, #5)"}, {"id": "Harry Potter and the Sorcerer\'s Stone (Harry Potter, #1)", "source": "J.K. Rowling, Mary GrandPr\\u00e9", "target": "Harry Potter and the Sorcerer\'s Stone (Harry Potter, #1)"}, {"id": "4.54", "source": "J.K. Rowling, Mary GrandPr\\u00e9", "target": "4.54"}, {"id": "4.61", "source": "J.K. Rowling, Mary GrandPr\\u00e9", "target": "4.61"}, {"id": "4.53", "source": "J.K. Rowling, Mary GrandPr\\u00e9", "target": "4.53"}, {"id": "4.37", "source": "J.K. Rowling, Mary GrandPr\\u00e9", "target": "4.37"}, {"id": "4.46", "source": "J.K. Rowling, Mary GrandPr\\u00e9", "target": "4.46"}, {"id": "4.44", "source": "J.K. Rowling, Mary GrandPr\\u00e9", "target": "4.44"}]
var nodeMap = {}
  var g = {
    nodes: [],
    edges: []
  }

for (var i = 0; i < results.length; i++) {
    result = results[i];
    source = result["source"]
    target = result["target"]
    var source_color
    var target_color
    if (result["source_color"] != undefined) {
      source_color = result["source_color"]
    } else {
      // source_color = "#2c3e50"
      source_color = "#001B8A"
    }
    if (result["target_color"] != undefined) {
      target_color = result["target_color"]
    } else {
      target_color = "#F09300"
    }
    if (nodeMap[source] !== true) {
      var data = {
        id: source,
        x: Math.random(),
        y: Math.random(),
        size: 10,
        color: source_color

      }
      if (result["source_label"] != undefined) {
        data.label = result["source_label"]
      } else {
        data.label = source
      }
      g.nodes.push(data)
      nodeMap[source] = true
    }
    if (nodeMap[target] !== true) {
      var data = {
        id: target,
        x: Math.random(),
        y: Math.random(),
        size: 10,
        color: target_color
      }
      if (result["target_label"] != undefined) {
        data.label = result["target_label"]
      } else {
        data.label = target
      }
      g.nodes.push(data)
      nodeMap[target] = true
    }
    g.edges.push({
      id: "e" + i,
      source: source,
      target: target,
      size: 5,
      color: '#ccc'
    })

  }

  var graph = new sigma({
    graph: g,
    container: 'container',
    settings: {
      defaultNodeColor: '#ec5148',
      animationsTime: 1000
    }
  });

graph.startForceAtlas2({worker: true, barnesHutOptimize: false});
</script>
</body>
</html>